<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MY ROOM</title>
<style>
  /* ===== Reset & Base ===== */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; background:#000; color:#fff; overflow-x:hidden}

  /* ===== Background Canvas (awan + petir) ===== */
  #bgCanvas{position:fixed; inset:0; z-index:-2; display:block; background:#000}

  /* ===== Glass Shatter Canvas ===== */
  #glassCanvas{position:fixed; inset:0; z-index:1000; pointer-events:none; display:none}

  /* ===== Popup Welcome (kaca transparan "cermin") ===== */
  #welcomePopup{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.4); z-index:999}
  .glass-card{
    position:relative; padding:28px 36px; border-radius:14px;
    background:rgba(255,255,255,.10); backdrop-filter: blur(12px) saturate(120%);
    -webkit-backdrop-filter: blur(12px) saturate(120%);
    box-shadow:0 10px 40px rgba(0,0,0,.6), inset 0 0 0 1px rgba(255,255,255,.18);
    overflow:hidden; text-align:center; min-width:280px;
  }

  /* efek pantulan "cermin" */
  .glass-card::before{
    content:""; position:absolute; inset:-40% -10% auto -10%; height:160%;
    background:linear-gradient(60deg, rgba(255,255,255,.35) 0%, rgba(255,255,255,.06) 35%, rgba(255,255,255,0) 60%);
    transform:translateY(-20%) rotate(6deg); pointer-events:none; filter:blur(1px);
  }
  .glass-title{font-size:24px; letter-spacing:.5px; margin-bottom:14px}
  .btn{
    appearance:none; background:transparent; color:#fff; border:2px solid #fff;
    padding:10px 20px; border-radius:10px; cursor:pointer; font-weight:700;
    box-shadow:0 0 16px rgba(255,255,255,.55), 0 8px 24px rgba(0,0,0,.6);
    transition: transform .08s ease, box-shadow .2s ease;
  }
  .btn:active{ transform:translateY(1px) scale(.99)}
  .btn:hover{ box-shadow:0 0 22px rgba(255,255,255,.8), 0 10px 30px rgba(0,0,0,.7)}

  /* ===== Loading Screen ===== */
  #loading{position:fixed; inset:0; display:none; align-items:center; justify-content:center; gap:14px; background:rgba(0,0,0,.85); z-index:998}
  .spinner{width:22px; height:22px; border:3px solid rgba(255,255,255,.25); border-top-color:#fff; border-radius:50%; animation:spin 1s linear infinite}
  .loading-text{font-size:18px; opacity:.9; letter-spacing:.3px}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* ===== Terminal - FIXED ===== */
  #terminal{
    width:min(900px, 86vw); margin:90px auto 16px; border-radius:14px; overflow:hidden;
    background:#0d0f0f; color:#00ff88; box-shadow: 0 0 28px rgba(0,255,136,.25), 0 6px 40px rgba(0,0,0,.5);
    transform: translateY(-20px); opacity:0; 
    visibility: hidden;
    transition: transform .6s cubic-bezier(.2,.7,.2,1), opacity .6s ease, visibility 0s linear .6s;
  }
  #terminal.show{
    transform:translateY(0); 
    opacity:1; 
    visibility: visible;
    transition: transform .6s cubic-bezier(.2,.7,.2,1), opacity .6s ease;
  }
  .term-bar{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; background:#151819; border-bottom:1px solid rgba(255,255,255,.06)}
  .term-title{opacity:.8; font-size:12px; letter-spacing:.3px}
  .term-body{padding:14px 14px 18px; min-height:160px; white-space:pre-wrap}
  .term-btn{border:1px solid currentColor; background:transparent; color:inherit; padding:6px 10px; border-radius:8px; cursor:pointer}
  #terminal.light{background:#f7f7f7; color:#101010; box-shadow: 0 0 18px rgba(0,0,0,.25)}
  #terminal.light .term-bar{background:#e9e9e9; border-bottom-color:rgba(0,0,0,.08)}

  /* caret untuk typewriter */
  .caret::after{
    content:""; display:inline-block; width:9px; height:1.2em; margin-left:3px; border-right:2px solid currentColor; animation:blink 1s steps(1,end) infinite;
    transform:translateY(2px)
  }
  @keyframes blink{50%{border-right-color:transparent}}

  /* ===== File Tree (smooth expand) ===== */
  .tree{width:min(900px, 86vw); margin:10px auto 0; font-family:inherit; line-height:1.55}
  .tree .folder{cursor:pointer; color:#4aefff; user-select:none; display:inline-block; padding:4px 6px; border-radius:6px}
  .tree .folder:hover{background:rgba(74,239,255,.08)}
  .tree .content-wrapper{overflow:hidden; max-height:0; transition:max-height .5s ease}
  .tree .content{padding:8px 8px 0 8px; color:#cfe; opacity:.9}

  /* ===== Jam Analog Classic ===== */
  #clockWrap{width:min(320px, 80vw); margin:18px auto 0; filter: drop-shadow(0 6px 20px rgba(255,255,255,.15)) drop-shadow(0 0 6px rgba(255,255,255,.25))}
  #clockCanvas{width:100%; height:auto; display:block; aspect-ratio:1/1; background: radial-gradient(ellipse at center, #0b0b0b 0%, #000 100%); border-radius:16px; }

  /* ===== Marquee ===== */
  .marquee{position:relative; overflow:hidden; white-space:nowrap; width:100%; margin:20px 0}
  .marquee span{
    display:inline-block; padding-left:100%; animation:marq 22s linear infinite;
    text-shadow: 0 0 2px #fdd, 0 0 6px #ff9, 0 0 12px #fc4, 0 0 22px #f80, 0 0 38px #f30;
  }
  @keyframes marq{from{transform:translateX(0)} to{transform:translateX(-100%)}}

  /* ===== YouTube Button & Video ===== */
  #videoWrap{width:min(560px, 90vw); margin:20px auto; text-align:center;}
  .youtube-btn{
    background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
    border: 2px solid #333;
    color: #fff;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    box-shadow: 
      0 4px 8px rgba(0,0,0,0.3),
      0 2px 4px rgba(0,0,0,0.2),
      inset 0 1px 0 rgba(255,255,255,0.1);
    transition: all 0.3s ease;
    text-shadow: 0 0 4px #ff0000;
  }
  .youtube-btn:hover{
    background: linear-gradient(145deg, #2a2a2a, #1d1d1d);
    box-shadow: 
      0 6px 12px rgba(255,0,0,0.3),
      0 4px 8px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.15);
    text-shadow: 0 0 6px #ff0000, 0 0 12px #ff3333;
  }
  .youtube-btn:active{
    transform: translateY(1px);
    box-shadow: 
      0 2px 4px rgba(255,0,0,0.4),
      0 1px 2px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,255,255,0.1);
  }
  
  .video-container{
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
    border-radius: 12px;
    margin-top: 16px;
    opacity: 0;
    transform: scaleY(0.1) scaleX(0.8);
    transform-origin: center;
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    box-shadow: 0 0 0 rgba(255,0,0,0);
  }
  
  .video-container.show{
    opacity: 1;
    transform: scaleY(1) scaleX(1);
    box-shadow: 
      0 0 20px rgba(255,0,0,0.6),
      0 0 40px rgba(255,0,0,0.4),
      0 8px 32px rgba(0,0,0,0.3);
  }

  .video-container.minimized{
    padding-bottom: 0;
    height: 60px;
    transform: scaleY(1) scaleX(1);
    box-shadow: 0 0 10px rgba(255,0,0,0.4);
  }
  
  .video-container iframe{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
    border-radius: 12px;
  }

  .video-controls{
    position: absolute;
    top: 8px;
    right: 8px;
    z-index: 10;
    display: none;
  }

  .video-container.show .video-controls{
    display: block;
  }

  .minimize-btn{
    background: rgba(0,0,0,0.7);
    border: 1px solid #ff0000;
    color: #fff;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    text-shadow: 0 0 4px #ff0000;
    transition: all 0.2s ease;
  }

  .minimize-btn:hover{
    background: rgba(255,0,0,0.2);
    box-shadow: 0 0 8px rgba(255,0,0,0.5);
  }

  /* ===== Digital Clock ===== */
  #digitalClock{
    width: min(400px, 90vw);
    margin: 20px auto;
    padding: 16px;
    background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
    border: 2px solid #333;
    border-radius: 12px;
    text-align: center;
    box-shadow: 
      0 4px 16px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.1);
  }

  .digital-time{
    font-size: 32px;
    font-weight: bold;
    color: #00ff88;
    text-shadow: 0 0 10px rgba(0,255,136,0.5);
    margin-bottom: 8px;
    letter-spacing: 2px;
  }

  .digital-date{
    font-size: 16px;
    color: #4aefff;
    text-shadow: 0 0 6px rgba(74,239,255,0.4);
    margin-bottom: 4px;
  }

  .digital-day{
    font-size: 14px;
    color: #cfe;
    opacity: 0.8;
  }

  /* ===== Credit ===== */
  .credit{text-align:center; opacity:.7; margin-bottom:28px}

  /* mobile tweak */
  @media (max-width:480px){
    .glass-card{padding:22px}
    .glass-title{font-size:20px}
  }
</style>
</head>
<body>

<!-- Background animation -->
<canvas id="bgCanvas" aria-hidden="true"></canvas>

<!-- Glass shatter overlay -->
<canvas id="glassCanvas" aria-hidden="true"></canvas>

<!-- Welcome Popup -->
<section id="welcomePopup" aria-modal="true" role="dialog" aria-labelledby="wlcm-title">
  <div class="glass-card" id="glassCard">
    <h1 class="glass-title" id="wlcm-title">Selamat Datang</h1>
    <button class="btn" id="enterBtn" aria-label="Masuk ke ruangan">Masuk</button>
  </div>
</section>

<!-- Loading -->
<section id="loading" aria-live="polite">
  <div class="spinner" aria-hidden="true"></div>
  <div class="loading-text">Memuat...</div>
</section>

<!-- Terminal -->
<section id="terminal" aria-label="Terminal">
  <div class="term-bar">
    <div class="term-title">/home/dani-terminal/my-work</div>
    <button id="themeToggle" class="term-btn" title="Ganti tema">Dark / Light</button>
  </div>
  <div class="term-body" id="termBody"></div>
</section>


<!-- File Tree -->
<div class="tree" aria-label="File List">
  <div class="folder" id="folderToggle" tabindex="0">MY-PROFILE/</div>
  <div class="content-wrapper" id="treeWrap" aria-hidden="true">
    <div class="content" id="treeContent">
      ├── <a href="/My-Profile/">Profile-Pribardi-Int</a><br/>
      │ &nbsp; ├── <a href="/My-Profile/">Nama-Lengkap</a><br/>
      │ &nbsp; ├── <a href="/My-Profile/">Tempat-Tanggal-Lahir</a><br/>
      │ &nbsp; ├── <a href="/My-Profile/">Alamat-Lengkap</a><br/>
      │ &nbsp; ├── <a href="/My-Profile/">Pendidikan-Lengkap</a><br/>
      │ &nbsp; ├── <a href="/My-Profile/">Pengalaman-Lengkap</a><br/>
      │ &nbsp; ├── <a href="/My-Profile/">Hoby</a><br/>
      ├── <a href="#sosmed">Social-Media-Int</a><br/>
      │ &nbsp; ├── <a href="#ig">Instagram</a><br/>
      │ &nbsp; ├── <a href="#fb">Facebook</a><br/>
      │ &nbsp; ├── <a href="#twit">Twitter</a><br/>
      │ &nbsp; ├── <a href="#linkedin">Linkedin</a><br/>
      ├── <a href="#source">Source-Code-Tools</a><br/>
      │ &nbsp; ├── <a href="#dis">Disclaimer</a><br/>
      │ &nbsp; ├── <a href="https://sundowndev.github.io/phoneinfoga/">Phoneinfoga</a><br/>
      │ &nbsp; ├── <a href="https://www.maltego.com/">Maltego</a><br/>
      │ &nbsp; ├── <a href="https://github.com/">Github</a><br/>
      │ &nbsp; ├── <a href="https://osintframework.com/">osintframework</a><br/>
      │ &nbsp; ├── <a href="https://tryhackme.com/">TryHackMe("PALING GUA SUKA INI WEB")</a><br/>
      │ &nbsp; ├── <a href="https://www.exploit-db.com/">Exploit-DB</a><br/>
      │ &nbsp; ├── <a href="https://www.metasploit.com/">Metasploit</a><br/>
      │ &nbsp; ├── <a href="#pri">Privasi-Clean-UP</a><br/>
      │ &nbsp; ├── <a href="https://github.com/TeehanLax/Hyperlapse.js">Google-Street-View</a><br/>
      ├── <a href="#buku">Favourite-Book</a><br/>
      │ &nbsp; ├── <a href="https://www.google.com/search?q=book+python+programming+for+beginners&client=ubuntu-sn&hs=2md&sca_esv=cb6d5bace73091a1&channel=fs&sxsrf=AE3TifOq2ngixBX84CJkayYaVJ2-sAQwtw%3A1755340684892&ei=jF-gaKGbNqv2seMPq9rnmAw&oq=book+python+programming+for+&gs_lp=Egxnd3Mtd2l6LXNlcnAiHGJvb2sgcHl0aG9uIHByb2dyYW1taW5nIGZvciAqAggAMgYQABgWGB4yBhAAGBYYHjIGEAAYFhgeMgYQABgWGB4yBhAAGBYYHjIGEAAYFhgeMggQABgWGAoYHjIGEAAYFhgeMgYQABgWGB4yBhAAGBYYHkjxWlC-C1jpS3ABeAGQAQKYAZMLoAHdRKoBDzAuNy4xLjMuMS4yLjEuM7gBAcgBAPgBAZgCEaAC4zLCAgoQABiwAxjWBBhHwgINEAAYgAQYsAMYQxiKBcICCBAuGIAEGMsBwgIIEAAYgAQYywHCAgUQABiABMICFxAuGIAEGMsBGJcFGNwEGN4EGOAE2AEBmAMAiAYBkAYKugYGCAEQARgUkgcPMS42LjIuMi4zLjEuMS4xoAfLmAGyBw8wLjYuMi4yLjMuMS4xLjG4B8AywgcGNC0xNi4xyAf_Ag&sclient=gws-wiz-serp">Book-Python-Terlengkap</a><br/>
      │ &nbsp; ├── <a href="https://www.google.com/search?q=book+Javascript+programming+for+beginners&client=ubuntu-sn&hs=ond&sca_esv=cb6d5bace73091a1&channel=fs&sxsrf=AE3TifPKM2pV4SQU6k8AWWurv4N1MJmsRQ%3A1755340732690&ei=vF-gaMn1KYeGnesPsO-C2AQ&ved=0ahUKEwjJw9PmkY-PAxUHQ2cHHbC3AEsQ4dUDCA8&uact=5&oq=book+Javascript+programming+for+beginners&gs_lp=Egxnd3Mtd2l6LXNlcnAiKWJvb2sgSmF2YXNjcmlwdCBwcm9ncmFtbWluZyBmb3IgYmVnaW5uZXJzMgUQABjvBTIIEAAYgAQYogQyBRAAGO8FMgUQABjvBTIFEAAY7wVIlENQoRNY8TVwBXgBkAEAmAGCAqAB5gmqAQU2LjQuMbgBA8gBAPgBAZgCD6ACswvCAgoQABiwAxjWBBhHwgIIEAAYBxgIGB7CAgYQABgIGB7CAggQABgIGA0YHsICBBAhGAqYAwCIBgGQBgiSBwc3LjcuMC4xoAeWQrIHBzIuNy4wLjG4B4YKwgcJMi00LjMuNy4xyAeEAg&sclient=gws-wiz-serp">Buku-Javascript-Terlengkap</a><br/>
      │ &nbsp; ├── <a href="https://www.google.com/search?q=book+NodeJS+programming+for+beginners&client=ubuntu-sn&hs=Opd&sca_esv=cb6d5bace73091a1&channel=fs&sxsrf=AE3TifMN6TEiqSfCTtZvKalyC9MPwPaluA%3A1755340830682&ei=HmCgaJi6Kf6wwcsPpqPmmAY&ved=0ahUKEwiYwbCVko-PAxV-WHADHaaRGWMQ4dUDCA8&uact=5&oq=book+NodeJS+programming+for+beginners&gs_lp=Egxnd3Mtd2l6LXNlcnAiJWJvb2sgTm9kZUpTIHByb2dyYW1taW5nIGZvciBiZWdpbm5lcnMyBRAAGO8FMgUQABjvBTIFEAAY7wUyCBAAGIAEGKIEMgUQABjvBUi3GlDSCljNF3ACeAGQAQCYAcsBoAGuBqoBBTIuMy4xuAEDyAEA-AEBmAIHoALIBsICChAAGLADGNYEGEfCAggQABgIGA0YHpgDAIgGAZAGCJIHBTIuNC4xoAfGFrIHBTAuNC4xuAeIBsIHBTMtNi4xyAdq&sclient=gws-wiz-serp">Buku-NodeJS-Terlengkap</a><br/>
      │ &nbsp; ├── <a href="https://www.google.com/search?q=book+Golang+programming+for+beginners&client=ubuntu-sn&hs=Eqd&sca_esv=cb6d5bace73091a1&channel=fs&sxsrf=AE3TifNtgi5VcGtDYeKEJLbDk-nXvKpS3Q%3A1755340882481&ei=UmCgaMOTHfGwwcsPnLrqoAI&ved=0ahUKEwjDhIquko-PAxVxWHADHRydGiQQ4dUDCA8&uact=5&oq=book+Golang+programming+for+beginners&gs_lp=Egxnd3Mtd2l6LXNlcnAiJWJvb2sgR29sYW5nIHByb2dyYW1taW5nIGZvciBiZWdpbm5lcnMyCBAAGIAEGKIEMggQABiABBiiBDIIEAAYgAQYogQyBRAAGO8FMgUQABjvBUijD1CyCFi3DnACeAGQAQCYAboBoAGkBKoBAzMuMrgBA8gBAPgBAZgCBaAC6QLCAgoQABiwAxjWBBhHwgIIEAAYBxgIGB6YAwCIBgGQBgiSBwMzLjKgB-8TsgcDMS4yuAetAsIHBTMtNC4xyAdS&sclient=gws-wiz-serp">Buku-Golang-Terlengkap</a><br/>
      │ &nbsp; ├── <a href="https://www.google.com/search?q=book+HTML%2CCSS+programming+for+beginners&client=ubuntu-sn&hs=YWy&sca_esv=cb6d5bace73091a1&channel=fs&sxsrf=AE3TifPDd_EWxdj9VtShl73sC7uYSIT65g%3A1755340945496&ei=kWCgaIH_HYienesPo8DLkAo&ved=0ahUKEwjBi5DMko-PAxUIT2cHHSPgEqIQ4dUDCA8&uact=5&oq=book+HTML%2CCSS+programming+for+beginners&gs_lp=Egxnd3Mtd2l6LXNlcnAiJ2Jvb2sgSFRNTCxDU1MgcHJvZ3JhbW1pbmcgZm9yIGJlZ2lubmVyczIFEAAY7wUyBRAAGO8FMgUQABjvBTIFEAAY7wUyBRAAGO8FSNHIAlDN_wFY7qoCcAl4AZABAJgBrAGgAckIqgEDOS4yuAEDyAEA-AEBmAIToALiCsICChAAGLADGNYEGEfCAggQABgHGAgYHsICCBAAGIAEGKIEwgIEECEYCpgDAIgGAZAGCJIHBDEyLjegB9EksgcDMy43uAeDCcIHCDItMS4xNS4zyAeTAg&sclient=gws-wiz-serp">Buku-HTML&CSS-Terlengkap</a><br/>
      │ &nbsp; ├── <a href="https://www.google.com/search?q=book+c%2B%2B+programming+for+beginners&client=ubuntu-sn&hs=NXy&sca_esv=cb6d5bace73091a1&channel=fs&sxsrf=AE3TifOV9WzuJBDakAAKzC8lQOsmgoWD0w%3A1755340996894&ei=xGCgaImtNuX4seMPvoK64Qk&ved=0ahUKEwiJn9Hkko-PAxVlfGwGHT6BLpwQ4dUDCA8&uact=5&oq=book+c%2B%2B+programming+for+beginners&gs_lp=Egxnd3Mtd2l6LXNlcnAiImJvb2sgYysrIHByb2dyYW1taW5nIGZvciBiZWdpbm5lcnMyBhAAGAgYHjIGEAAYCBgeMgYQABgIGB4yBhAAGAgYHjIGEAAYCBgeMggQABiABBiiBDIFEAAY7wUyBRAAGO8FMgUQABjvBUixb1CWB1jaZXAFeAGQAQCYAeIIoAGLEKoBCzMuMy4wLjEuNy0xuAEDyAEA-AEBmAIMoALED8ICChAAGLADGNYEGEfCAgYQABgHGB7CAggQABgFGAcYHsICCBAAGAcYCBgewgIEECEYCpgDAIgGAZAGCJIHBzYuNS43LTGgB8s3sgcHMS41LjctMbgH2A7CBwcyLTEuNy40yAe5AQ&sclient=gws-wiz-serp">Buku-C++-Terlengkap</a><br/>
      │ &nbsp; ├── <a href="https://archive.org/details/beginners-step-by-step-coding-course-learn-computer-programming-the-easy-way-uk-edition">How-Can-I-To-Be-Programming</a><br/>
      └───────── <a href="../websiteGUE/web1-Tema-Responsive-kuning-putih/Toko-Kuning-Putih/">websitePenjualan</a><br/>
    </div>
  </div>
</div>

<!-- Clock -->
<div id="clockWrap"><canvas id="clockCanvas" width="500" height="500"></canvas></div>

<!-- YouTube Video -->
<div id="videoWrap">
  <h3 style="color:#00ff88; margin-bottom:12px; font-size:18px; letter-spacing:0.5px;">🎵 Background Music 🎵</h3>
  
  <button id="playYouTubeBtn" class="youtube-btn">▶️ Play YouTube</button>
  
  <div id="videoContainer" class="video-container">
    <div class="video-controls">
      <button id="minimizeBtn" class="minimize-btn">─ Minimize</button>
    </div>
    <iframe 
      id="youtubeIframe"
      src=""
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen
      title="Background Music">
    </iframe>
  </div>
  
  <p style="color:#cfe; font-size:12px; opacity:0.8; margin-top:8px;">Nikmati musik sambil menjelajahi ruangan</p>
</div>

<!-- Digital Clock -->
<div id="digitalClock">
  <div class="digital-time" id="digitalTime">00:00:00</div>
  <div class="digital-date" id="digitalDate">1 Januari 2024</div>
  <div class="digital-day" id="digitalDay">Senin</div>
</div>

<!-- Marquee -->
<div class="marquee">
  <span>Selamat menikmati makanan yang sudah di sediakan, semoga enak makanannya, dan enak, selamat makan yah...!!!</span>
</div>

<!-- Credit -->
<p class="credit">Credit by : Gue</p>

<script>
/* =========================
   UTIL
========================= */
const clamp=(v,min,max)=>Math.max(min,Math.min(max,v));
const duaDigit = angka => String(angka).padStart(2, '0');

/* =========================
   BACKGROUND: awan + petir
========================= */
const bg = document.getElementById('bgCanvas');
const bctx = bg.getContext('2d');
let W,H, clouds=[], bolts=[];
function resizeBG(){ W=bg.width=innerWidth; H=bg.height=innerHeight }
addEventListener('resize', resizeBG); resizeBG();

function makeCloud(){
  const parts = Math.floor(4+Math.random()*5);
  const blobs=[];
  const y = Math.random()*H*0.5 + 20;
  let x = Math.random()*W;
  const speed = .15 + Math.random()*.35;
  for(let i=0;i<parts;i++){
    blobs.push({
      x: x + i*30 + Math.random()*40,
      y: y + (Math.random()*40-20),
      r: 50+Math.random()*90
    });
  }
  return {blobs, speed};
}
for(let i=0;i<6;i++) clouds.push(makeCloud());

function spawnBolt(){
  const x = Math.random()*W;
  const seg = 12 + Math.floor(Math.random()*8);
  const path = [{x, y:0}];
  for(let i=1;i<=seg;i++){
    path.push({
      x: x + (Math.random()*60-30),
      y: (H/seg)*i + Math.random()*10
    });
  }
  bolts.push({path, life:0});
}
setInterval(spawnBolt, 4200 + Math.random()*1800);

function drawBG(){
  bctx.clearRect(0,0,W,H);

  // awan
  bctx.fillStyle = 'rgba(255,255,255,0.10)';
  clouds.forEach(c=>{
    c.blobs.forEach(p=>{
      bctx.beginPath();
      bctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      bctx.fill();
      p.x -= c.speed;
    });
    if(c.blobs[c.blobs.length-1].x + c.blobs[c.blobs.length-1].r < 0){
      const n = makeCloud();
      c.blobs = n.blobs; c.speed = n.speed;
    }
  });

  // petir
  for(let i=bolts.length-1;i>=0;i--){
    const bolt = bolts[i];
    const alpha = 1 - bolt.life/14;
    bctx.strokeStyle = `rgba(255,255,255,${alpha})`;
    bctx.lineWidth = 2;
    bctx.beginPath();
    bctx.moveTo(bolt.path[0].x, bolt.path[0].y);
    for(let j=1;j<bolt.path.length;j++){
      bctx.lineTo(bolt.path[j].x, bolt.path[j].y);
    }
    bctx.stroke();
    bolt.life++;
    if(bolt.life>14) bolts.splice(i,1);
  }

  requestAnimationFrame(drawBG);
}
drawBG();

/* =========================
   POPUP → LOADING → SHATTER → TERMINAL
========================= */
const popup = document.getElementById('welcomePopup');
const glassCard = document.getElementById('glassCard');
const enterBtn = document.getElementById('enterBtn');
const loading = document.getElementById('loading');
const shCanvas = document.getElementById('glassCanvas');
const sctx = shCanvas.getContext('2d');
function resizeSh(){ shCanvas.width=innerWidth; shCanvas.height=innerHeight }
addEventListener('resize', resizeSh); resizeSh();

let shards = [];

function createShardsFromRect(rect){
  shards.length=0;
  const colors = [
    [220,240,255], // biru pucat
    [255,255,255], // putih pucat
    [200,220,230]  // abu kaca
  ];
  const PIECES = 44;
  for(let i=0;i<PIECES;i++){
    const size = 10 + Math.random()*28;
    const alpha = .45 + Math.random()*.35;
    const col = colors[(Math.random()*colors.length)|0];
    shards.push({
      x: rect.left + Math.random()*rect.width,
      y: rect.top  + Math.random()*rect.height,
      dx: (Math.random()-.5)*13,
      dy: (Math.random()-.5)*13,
      rot: Math.random()*Math.PI*2,
      drot: (Math.random()-.5)*.28,
      g: .32 + Math.random()*.18,
      air: .992,
      size,
      alpha,
      col
    });
  }
}

function drawShard(s){
  sctx.save();
  sctx.translate(s.x, s.y);
  sctx.rotate(s.rot);

  sctx.beginPath();
  sctx.moveTo(0, 0);
  sctx.lineTo(s.size,  s.size*.45);
  sctx.lineTo(-s.size*.55, s.size*.95);
  sctx.closePath();

  sctx.fillStyle = `rgba(${s.col[0]},${s.col[1]},${s.col[2]},${s.alpha})`;
  sctx.fill();

  sctx.strokeStyle = `rgba(255,255,255,${Math.min(1, s.alpha+.15)})`;
  sctx.lineWidth = 1;
  sctx.stroke();

  sctx.beginPath();
  sctx.moveTo(-s.size*.2, s.size*.2);
  sctx.lineTo(s.size*.35, s.size*.05);
  sctx.strokeStyle = `rgba(255,255,255,${s.alpha*.6})`;
  sctx.lineWidth = .6;
  sctx.stroke();

  sctx.restore();
}

function animateShatter(){
  sctx.clearRect(0,0,shCanvas.width, shCanvas.height);
  for(let i=shards.length-1;i>=0;i--){
    const s = shards[i];
    drawShard(s);
    s.x += s.dx;
    s.y += s.dy;
    s.dy += s.g;
    s.dx *= s.air;
    s.rot += s.drot;
    s.alpha -= .0065;
    if(s.alpha<=0 || s.y-100>innerHeight) shards.splice(i,1);
  }
  if(shards.length>0) requestAnimationFrame(animateShatter);
  else shCanvas.style.display='none';
}

enterBtn.addEventListener('click', ()=>{
  popup.style.display='none';
  loading.style.display='flex';

  setTimeout(()=>{
    loading.style.display='none';
    
    const r = glassCard.getBoundingClientRect();
    
    shCanvas.style.display='block';
    createShardsFromRect(r);

    animateShatter();

    setTimeout(() => {
      showTerminal();
    }, 800);
    
  }, 3000);
});

/* =========================
   TERMINAL
========================= */
const terminal = document.getElementById('terminal');
const termBody = document.getElementById('termBody');
const themeToggle = document.getElementById('themeToggle');

const lines = [
  "WELCOME TO MY ROOM",
  "selamat datang di ruangan saya",
  "ini adalah ruangan yang gk ada apa apa nya di banding kalian yang banyak kreasi,",
  "saya cuma pelajar yang baru buat scrip simple dengan bantuan ChatGPT,",
  "jika suka dengan ruangan saya, yaudah haveFUN aje nO coMMEnt ye."
];

function showTerminal(){
  if(terminal && termBody) {
    terminal.classList.add('show');
    
    setTimeout(() => {
      typewriter(lines, 46);
    }, 300);
  }
}

function typewriter(arr, speed=50){
  if(!termBody) return;
  
  termBody.innerHTML = "";
  let li=0, ci=0;
  termBody.classList.add('caret');
  
  (function tick(){
    if(li>=arr.length){ 
      termBody.classList.remove('caret'); 
      return; 
    }
    if(ci < arr[li].length){
      // Tambahkan karakter satu per satu
      const currentChar = arr[li][ci];
      const span = document.createElement('span');
      span.textContent = currentChar;
      termBody.appendChild(span);
      ci++;
      setTimeout(tick, speed);
    }else{
      // Tambahkan line break dengan spasi ekstra untuk pemisahan yang jelas
      termBody.innerHTML += "<br><br>";
      li++; ci=0;
      setTimeout(tick, 500); // Delay lebih lama antar baris
    }
  })();
}

themeToggle.addEventListener('click', ()=> terminal.classList.toggle('light'));

/* =========================
   FILE TREE
========================= */
const folderToggle = document.getElementById('folderToggle');
const treeWrap = document.getElementById('treeWrap');
folderToggle.addEventListener('click', ()=>{
  const open = treeWrap.style.maxHeight && treeWrap.style.maxHeight !== '0px';
  if(open){
    treeWrap.style.maxHeight='0px';
    treeWrap.setAttribute('aria-hidden','true');
  }else{
    treeWrap.style.maxHeight = treeWrap.scrollHeight + 'px';
    treeWrap.setAttribute('aria-hidden','false');
  }
});
folderToggle.addEventListener('keydown', (e)=>{ 
  if(e.key==='Enter' || e.key===' '){ 
    e.preventDefault(); 
    folderToggle.click(); 
  }
});

/* =========================
   JAM ANALOG CLASSIC
========================= */
const clock = document.getElementById('clockCanvas');
const cctx = clock.getContext('2d');
function drawClock(){
  const w = clock.width, h = clock.height, r = Math.min(w,h)/2 - 26;
  cctx.clearRect(0,0,w,h);
  cctx.save();
  cctx.translate(w/2,h/2);

  // face
  const grad = cctx.createRadialGradient(0,0, r*.05, 0,0, r*1.08);
  grad.addColorStop(0,'#1a1a1a'); 
  grad.addColorStop(1,'#000');
  cctx.fillStyle = grad;
  cctx.beginPath(); 
  cctx.arc(0,0,r*1.02,0,Math.PI*2); 
  cctx.fill();

  // bezel
  cctx.strokeStyle='rgba(255,255,255,.2)';
  cctx.lineWidth=6; 
  cctx.beginPath(); 
  cctx.arc(0,0,r*1.02,0,Math.PI*2); 
  cctx.stroke();

  // ticks
  for(let i=0;i<60;i++){
    cctx.rotate(Math.PI/30);
    cctx.beginPath();
    cctx.moveTo(0,-r*0.90);
    cctx.lineWidth = (i%5===0)? 4:1.6;
    cctx.strokeStyle = (i%5===0)? 'rgba(255,255,255,.9)':'rgba(255,255,255,.5)';
    cctx.lineTo(0,-r*0.84);
    cctx.stroke();
  }

  const now = new Date();
  let hr = now.getHours()%12;
  let mn = now.getMinutes();
  let sc = now.getSeconds();

  // hands
  function hand(angle, len, width, color){
    cctx.save();
    cctx.rotate(angle);
    cctx.strokeStyle=color; 
    cctx.lineWidth=width; 
    cctx.lineCap='round';
    cctx.beginPath(); 
    cctx.moveTo(0, r*0.1); 
    cctx.lineTo(0, -len); 
    cctx.stroke();
    cctx.restore();
  }
  const secA = sc*Math.PI/30;
  const minA = (mn+sc/60)*Math.PI/30;
  const hrA  = (hr+mn/60)*Math.PI/6;

  hand(hrA,  r*0.50, 6, 'rgba(255,255,255,.95)');
  hand(minA, r*0.68, 4, 'rgba(255,255,255,.9)');
  hand(secA, r*0.75, 2, '#e33');

  // center cap
  cctx.fillStyle='#e33';
  cctx.beginPath(); 
  cctx.arc(0,0,5,0,Math.PI*2); 
  cctx.fill();

  cctx.restore();
}
setInterval(drawClock, 1000); 
drawClock();

/* =========================
   SAFETY
========================= */
/* =========================
   YOUTUBE BUTTON FUNCTIONALITY
========================= */
const playYouTubeBtn = document.getElementById('playYouTubeBtn');
const videoContainer = document.getElementById('videoContainer');
const youtubeIframe = document.getElementById('youtubeIframe');

playYouTubeBtn.addEventListener('click', ()=>{
  // Hide button
  playYouTubeBtn.style.display = 'none';
  
  // Set iframe source with autoplay
  youtubeIframe.src = 'https://www.youtube.com/embed/DjbWDdlvFpA?autoplay=1&mute=0&loop=1&playlist=jfKfPfyJRdk&controls=1&modestbranding=1&rel=0';
  
  // Show video with TV turn-on effect
  setTimeout(() => {
    videoContainer.classList.add('show');
  }, 100);
});

/* =========================
   Digital Clock
========================= */



/* =========================
   SAFETY
========================= */
addEventListener('load', ()=>{
  if(treeWrap.style.maxHeight && treeWrap.style.maxHeight!=='0px'){
    treeWrap.style.maxHeight = treeWrap.scrollHeight + 'px';
  }
});
</script>
</body>
</html>
