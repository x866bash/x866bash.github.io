<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MY ROOM</title>
<style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
        font-family: monospace;
        background: black;
        color: white;
        overflow-x: hidden;
    }

    /* ==== POPUP WELCOME ==== */
    #welcomePopup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255,255,255,0.1);
        backdrop-filter: blur(10px);
        padding: 20px 40px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 0 10px rgba(255,255,255,0.5);
        z-index: 999;
        animation: fadeIn 1s ease;
    }
    #welcomePopup h1 { margin-bottom: 20px; }
    #enterBtn {
        padding: 10px 20px;
        border: 2px solid white;
        background: transparent;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        box-shadow: 0 0 15px white;
    }
    #loadingScreen {
        display:none;
        position: fixed;
        top:0; left:0; width:100%; height:100%;
        background: rgba(0,0,0,0.8);
        color: white;
        font-size: 2rem;
        text-align: center;
        padding-top: 40vh;
        z-index: 998;
    }

    /* ==== BACKGROUND CANVAS ==== */
    #bgCanvas {
        position: fixed;
        top:0; left:0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: black;
    }

    /* ==== KACA PECAH CANVAS ==== */
    #glassCanvas {
        position: fixed;
        top:0; left:0;
        width: 100%;
        height: 100%;
        z-index: 1000;
        pointer-events: none;
        display: none;
    }

    /* ==== TERMINAL ==== */
    #terminal {
        background: #111;
        color: #0f0;
        padding: 10px;
        width: 80%;
        max-width: 800px;
        margin: 100px auto 20px;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0,255,0,0.5);
        display: none;
        overflow: hidden;
        transition: all 0.3s ease;
    }
    .light-theme {
        background: #f5f5f5;
        color: #111;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    .typewriter {
        white-space: pre-wrap;
        overflow: hidden;
        border-right: 2px solid currentColor;
        animation: caret 1s steps(1) infinite;
    }
    @keyframes caret {
        50% { border-color: transparent; }
    }
    #themeBtn {
        margin-top: 5px;
        padding: 5px 10px;
        border: 1px solid currentColor;
        background: transparent;
        color: inherit;
        cursor: pointer;
        border-radius: 5px;
    }

    /* ==== TREE LIST ==== */
    .tree { font-family: monospace; margin-top: 10px; }
    .folder { cursor: pointer; color: cyan; }
    .hidden { display: none; }
    .file { margin-left: 20px; }

    /* ==== JAM ==== */
    #clock {
        margin-top: 10px;
        font-size: 1.5rem;
        text-align: center;
        text-shadow: 0 0 10px white;
    }

    /* ==== TEXT BERJALAN ==== */
    #marquee {
        width: 100%;
        overflow: hidden;
        white-space: nowrap;
        position: relative;
        margin-top: 20px;
    }
    #marquee span {
        display: inline-block;
        padding-left: 100%;
        animation: scrollLeft 20s linear infinite;
        text-shadow: 0 0 5px orange, 0 0 10px red;
    }
    @keyframes scrollLeft {
        0% { transform: translateX(0); }
        100% { transform: translateX(-100%); }
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translate(-50%, -60%); }
        to { opacity: 1; transform: translate(-50%, -50%); }
    }
</style>
</head>
<body>

<!-- POPUP -->
<div id="welcomePopup">
    <h1>Selamat Datang</h1>
    <button id="enterBtn">Masuk</button>
</div>
<div id="loadingScreen">Loading...</div>

<!-- BACKGROUND -->
<canvas id="bgCanvas"></canvas>
<!-- KACA PECAH -->
<canvas id="glassCanvas"></canvas>

<!-- TERMINAL -->
<div id="terminal">
    <button id="themeBtn">Switch Theme</button>
    <div id="terminalText" class="typewriter"></div>
    <div class="tree">
        <div class="folder">MY-ROOM/</div>
        <div class="hidden" id="folderContent">
            ├── src/<br>
            │   ├── app.py <br>
            │   ├── db.py <br>
            ├── src/<br>
            │   ├── app.py <br>
            │   ├── db.py <br>
        </div>
    </div>
    <div id="clock"></div>
</div>

<!-- TEKS BERJALAN -->
<div id="marquee">
    <span>Selamat menikmati makanan yang sudah di sediakan, semoga enak makanannya, dan enak, selamat makan yah...!!!</span>
</div>
<div style="text-align:center; margin-top:10px;">Credit by : Dani</div>

<script>
/* ==== POPUP + KACA PECAH ==== */
const enterBtn = document.getElementById("enterBtn");
const welcomePopup = document.getElementById("welcomePopup");
const loadingScreen = document.getElementById("loadingScreen");
const terminal = document.getElementById("terminal");
const glassCanvas = document.getElementById("glassCanvas");
const gctx = glassCanvas.getContext("2d");

// Suara pecah kaca
const glassSound = new Audio("glass_break.mp3"); // ganti ke URL online jika mau

function resizeGlassCanvas() {
    glassCanvas.width = window.innerWidth;
    glassCanvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeGlassCanvas);
resizeGlassCanvas();

function startGlassShatterFromPopup() {
    glassCanvas.style.display = "block";
    let popupRect = welcomePopup.getBoundingClientRect();
    let centerX = popupRect.left + popupRect.width / 2;
    let centerY = popupRect.top + popupRect.height / 2;

    // mainkan suara kaca pecah
    glassSound.currentTime = 0;
    glassSound.play();

    let shards = [];
    let shardCount = 80;
    for (let i = 0; i < shardCount; i++) {
        shards.push({
            x: centerX,
            y: centerY,
            angle: Math.random() * Math.PI * 2,
            speed: 3 + Math.random() * 5,
            size: 5 + Math.random() * 20,
            alpha: 1
        });
    }

    function animateShards() {
        gctx.clearRect(0,0,glassCanvas.width,glassCanvas.height);
        shards.forEach(s => {
            gctx.fillStyle = `rgba(200,200,255,${s.alpha})`;
            gctx.beginPath();
            gctx.moveTo(s.x, s.y);
            gctx.lineTo(s.x + s.size, s.y + s.size / 2);
            gctx.lineTo(s.x - s.size, s.y - s.size / 2);
            gctx.closePath();
            gctx.fill();
            s.x += Math.cos(s.angle) * s.speed;
            s.y += Math.sin(s.angle) * s.speed;
            s.alpha -= 0.02;
        });
        shards = shards.filter(s => s.alpha > 0);
        if (shards.length > 0) {
            requestAnimationFrame(animateShards);
        } else {
            glassCanvas.style.display = "none";
            loadingScreen.style.display = "block";
            setTimeout(() => {
                loadingScreen.style.display = "none";
                terminal.style.display = "block";
                showTerminalText();
            }, 10000);
        }
    }
    animateShards();
}

enterBtn.addEventListener("click", () => {
    welcomePopup.style.display = "none";
    startGlassShatterFromPopup();
});

/* ==== TERMINAL TYPEWRITER ==== */
const textLines = [
    "WELCOME TO MY ROOM",
    "selamat datang di ruangan saya",
    "ini adalah ruangan yang gk ada apa apa nya di banding kalian yang banyak kreasi,",
    "saya cuma pelajar yang baru buat scrip simple dengan bantuan ChatGPT,",
    "jika suka dengan ruangan saya bisa yaudah haveFUN ye nO coMMEnt ye."
];
let currentLine = 0;
let charIndex = 0;
const terminalText = document.getElementById("terminalText");

function showTerminalText() {
    if (currentLine < textLines.length) {
        if (charIndex < textLines[currentLine].length) {
            terminalText.textContent += textLines[currentLine][charIndex];
            charIndex++;
            setTimeout(showTerminalText, 50);
        } else {
            terminalText.textContent += "\n";
            currentLine++;
            charIndex = 0;
            setTimeout(showTerminalText, 500);
        }
    }
}

/* ==== TREE TOGGLE ==== */
document.querySelector(".folder").addEventListener("click", () => {
    document.getElementById("folderContent").classList.toggle("hidden");
});

/* ==== CLOCK ==== */
function updateClock() {
    const now = new Date();
    let h = now.getHours();
    let m = now.getMinutes();
    let s = now.getSeconds();
    if (h < 10) h = "0" + h;
    if (m < 10) m = "0" + m;
    if (s < 10) s = "0" + s;
    document.getElementById("clock").textContent = `${h}:${m}:${s}`;
}
setInterval(updateClock, 1000);
updateClock();

/* ==== SWITCH THEME ==== */
document.getElementById("themeBtn").addEventListener("click", () => {
    terminal.classList.toggle("light-theme");
});

/* ==== BACKGROUND ANIMATION ==== */
const canvas = document.getElementById("bgCanvas");
const ctx = canvas.getContext("2d");
let clouds = [];
let lightning = [];

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

function createCloud() {
    return {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height * 0.5,
        radius: 50 + Math.random() * 100,
        speed: 0.2 + Math.random() * 0.5
    };
}
for (let i = 0; i < 5; i++) clouds.push(createCloud());

function createLightning() {
    lightning.push({ x: Math.random() * canvas.width, life: 0 });
}
setInterval(createLightning, 5000);

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    // awan
    ctx.fillStyle = "rgba(255,255,255,0.1)";
    clouds.forEach(cloud => {
        ctx.beginPath();
        ctx.arc(cloud.x, cloud.y, cloud.radius, 0, Math.PI * 2);
        ctx.fill();
        cloud.x -= cloud.speed;
        if (cloud.x + cloud.radius < 0) {
            cloud.x = canvas.width + cloud.radius;
            cloud.y = Math.random() * canvas.height * 0.5;
        }
    });
    // petir
    lightning.forEach((bolt, index) => {
        ctx.strokeStyle = `rgba(255,255,255,${1 - bolt.life / 10})`;
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(bolt.x, 0);
        ctx.lineTo(bolt.x, canvas.height);
        ctx.stroke();
        bolt.life++;
        if (bolt.life > 10) lightning.splice(index, 1);
    });
    requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>
