<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>My Room</title>
<style>
    body {
        margin: 0;
        background: black;
        color: white;
        font-family: monospace;
        overflow: hidden;
    }
    /* Popup */
    #popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(8px);
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 0 15px rgba(255,255,255,0.5);
        z-index: 9999;
    }
    #masukBtn {
        padding: 10px 20px;
        border: 2px solid white;
        background: transparent;
        color: white;
        cursor: pointer;
        box-shadow: 0 0 10px white;
        margin-top: 10px;
    }
    #loadingText {
        display: none;
        margin-top: 10px;
        font-style: italic;
    }
    /* Canvas kaca pecah */
    #glassCanvas {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9998;
        pointer-events: none;
    }
</style>
</head>
<body>

<!-- Popup -->
<div id="popup">
    <h2>Selamat Datang</h2>
    <button id="masukBtn">Masuk</button>
    <div id="loadingText">Memuat...</div>
</div>

<!-- Canvas kaca pecah -->
<canvas id="glassCanvas"></canvas>

<script>
    const masukBtn = document.getElementById("masukBtn");
    const popup = document.getElementById("popup");
    const loadingText = document.getElementById("loadingText");
    const glassCanvas = document.getElementById("glassCanvas");
    const ctx = glassCanvas.getContext("2d");

    glassCanvas.width = window.innerWidth;
    glassCanvas.height = window.innerHeight;

    let shards = [];

    masukBtn.addEventListener("click", () => {
        loadingText.style.display = "block"; // tampilkan memuat...
        setTimeout(() => {
            loadingText.style.display = "none"; // sembunyikan memuat
            triggerGlassBreak(); // efek kaca pecah
            popup.style.display = "none"; // hilangkan popup
        }, 10000);
    });

    function triggerGlassBreak() {
        playGlassSound();
        shards = [];
        const shardCount = 50;
        for (let i = 0; i < shardCount; i++) {
            shards.push({
                x: window.innerWidth / 2,
                y: window.innerHeight / 2,
                size: Math.random() * 20 + 5,
                speedX: (Math.random() - 0.5) * 8,
                speedY: (Math.random() - 0.5) * 8,
                color: `rgba(200, 255, 255, ${Math.random() * 0.5 + 0.5})`
            });
        }
        animateShards();
    }

    function animateShards() {
        ctx.clearRect(0, 0, glassCanvas.width, glassCanvas.height);
        shards.forEach(s => {
            ctx.beginPath();
            ctx.fillStyle = s.color;
            ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
            ctx.fill();
            s.x += s.speedX;
            s.y += s.speedY;
            s.speedY += 0.2; // gravitasi
        });
        if (shards.some(s => s.y < window.innerHeight)) {
            requestAnimationFrame(animateShards);
        }
    }

    function playGlassSound() {
        const audio = new Audio("https://www.myinstants.com/media/sounds/glass-breaking.mp3");
        audio.play();
    }

    window.addEventListener("resize", () => {
        glassCanvas.width = window.innerWidth;
        glassCanvas.height = window.innerHeight;
    });
</script>

</body>
</html>
